# API Security Migration Tasks

## Phase 1: Critical Routes (21 routes)
Must be completed immediately - handles payments and authentication.

- [ ] admin\proposals\send-payment\route.ts
- [ ] auth\2fa\disable\route.ts
- [ ] auth\2fa\enable\route.ts
- [ ] auth\2fa\status\route.ts
- [ ] auth\2fa\verify\route.ts
- [ ] auth\forgot-password\route.ts
- [ ] auth\reset-password\route.ts
- [ ] auth\signup\route.ts
- [ ] auth\verify-email\route.ts
- [ ] auth\[...nextauth]\route.ts
- [ ] clicksign\webhook\route.ts
- [ ] cron\payment-reminders\route.ts
- [ ] mercadopago\create-payment\route.ts
- [ ] mercadopago\webhook\route.ts
- [ ] stripe\checkout\route.ts
- [ ] stripe\create-session\route.ts
- [ ] stripe\portal\route.ts
- [ ] stripe\webhook\route.ts
- [ ] webhooks\clicksign\route.ts
- [ ] webhooks\mercadopago\route.ts
- [ ] webhooks\stripe\route.ts

## Phase 2: High Priority (21 routes)
Admin functions, chat, and AI endpoints.

- [ ] ads\campaigns\route.ts
- [ ] ai\chat\route.ts
- [ ] calendar\available-slots\route.ts
- [ ] chat\agent-flow\route.ts
- [ ] chat\assistant\route.ts
- [ ] chat\qualify\route.ts
- [ ] chat\route.ts
- [ ] chat\text-to-speech\route.ts
- [ ] chat\transcribe\route.ts
- [ ] cron\daily-report\route.ts
- [ ] cron\email-monitor\route.ts
- [ ] cron\email-sequences\route.ts
- [ ] cron\gmail-monitor\route.ts
- [ ] cron\monitor-emails\route.ts
- [ ] diagnostic\openai\route.ts
- [ ] email\sequences\cron\route.ts
- [ ] email\sequences\subscribe\route.ts
- [ ] gmail\monitor\route.ts
- [ ] marketing\campaigns\route.ts
- [ ] marketing\campaigns\[id]\route.ts
- [ ] whatsapp\baileys\webhook\route.ts

## Phase 3: Medium Priority (7 routes)
CRM, leads, and analytics.

- [ ] admin\analytics\leads\route.ts
- [ ] admin\analytics\leads-stats\route.ts
- [ ] admin\leads\dashboard\route.ts
- [ ] admin\leads\qualified\route.ts
- [ ] admin\leads\route.ts
- [ ] admin\leads\stats\route.ts
- [ ] cron\escalate-hot-leads\route.ts

## Phase 4: Low Priority (109 routes)
Read-only and public endpoints.

- [ ] admin\agents\[id]\route.ts
- [ ] admin\agents\[id]\test\route.ts
- [ ] admin\analytics\conversion-rate\route.ts
- [ ] admin\analytics\errors\route.ts
- [ ] admin\analytics\health\route.ts
- [ ] admin\analytics\overview\route.ts
- [ ] admin\analytics\revenue\route.ts
- [ ] admin\analytics\source-performance\route.ts
- [ ] admin\analytics\top-products\route.ts
- [ ] admin\certificate\route.ts
- [ ] admin\conversations\route.ts
- [ ] admin\conversations\[id]\messages\route.ts
- [ ] admin\conversations\[id]\route.ts
- [ ] admin\conversations\[id]\takeover\route.ts
- [ ] admin\follow-ups\manual\route.ts
- [ ] admin\follow-ups\process\route.ts
- [ ] admin\proposals\generate\route.ts
- [ ] admin\security\audit-logs\route.ts
- [ ] admin\security\metrics\route.ts
- [ ] admin\settings\route.ts
- [ ] admin\templates\send-test\route.ts
- [ ] admin\templates\[id]\route.ts
- [ ] ads\optimize\route.ts
- [ ] ads\report\route.ts
- [ ] analytics\advanced\route.ts
- [ ] analytics\route.ts
- [ ] app\clients\route.ts
- [ ] app\dashboard\stats\route.ts
- [ ] app\products\route.ts
- [ ] app\products\[id]\route.ts
- [ ] app\settings\route.ts
- [ ] beta\feature-request\route.ts
- [ ] beta\report-bug\route.ts
- [ ] beta\signup\route.ts
- [ ] cache\test\route.ts
- [ ] calendar\book-appointment\route.ts
- [ ] calendar\sync\route.ts
- [ ] checkout\order\route.ts
- [ ] contact\route.ts
- [ ] content\analytics\route.ts
- [ ] content\generate\route.ts
- [ ] content\review\route.ts
- [ ] content\schedule\route.ts
- [ ] conversations\route.ts
- [ ] conversations\[id]\messages\route.ts
- [ ] conversations\[id]\route.ts
- [ ] conversations\[id]\takeover\route.ts
- [ ] cron\appointment-automation\route.ts
- [ ] cron\cleanup-sessions\route.ts
- [ ] cron\content-generation\route.ts
- [ ] cron\deadline-reminders\route.ts
- [ ] cron\nps-requests\route.ts
- [ ] cron\partner-reports\route.ts
- [ ] cron\publish-content\route.ts
- [ ] cron\send-follow-ups\route.ts
- [ ] cron\sync-calendar\route.ts
- [ ] csrf-token\route.ts
- [ ] docs\route.ts
- [ ] documents\analyze\route.ts
- [ ] documents\export\route.ts
- [ ] documents\generate\route.ts
- [ ] documents\legal\route.ts
- [ ] documents\review\route.ts
- [ ] documents\route.ts
- [ ] documents\sign\route.ts
- [ ] documents\upload\route.ts
- [ ] errors\route.ts
- [ ] health\route.ts
- [ ] inngest\route.ts
- [ ] judit\webhook\route.ts
- [ ] marketing\ab-tests\route.ts
- [ ] marketing\ab-tests\[id]\route.ts
- [ ] marketing\evaluate-lead\route.ts
- [ ] marketing\score\[leadId]\route.ts
- [ ] marketing\track\route.ts
- [ ] notifications\route.ts
- [ ] notifications\[id]\read\route.ts
- [ ] nps\check\route.ts
- [ ] nps\submit\route.ts
- [ ] performance\route.ts
- [ ] process-monitor\cron\route.ts
- [ ] process-monitor\route.ts
- [ ] realtime\session\route.ts
- [ ] reports\generate\route.ts
- [ ] resend\webhook\route.ts
- [ ] route.ts
- [ ] seo\audit\route.ts
- [ ] seo\keywords\route.ts
- [ ] seo\optimize\route.ts
- [ ] seo\report\route.ts
- [ ] subscriptions\cancel\route.ts
- [ ] subscriptions\current\route.ts
- [ ] subscriptions\invoices\route.ts
- [ ] telegram\send\route.ts
- [ ] telegram\webhook\route.ts
- [ ] test\route.ts
- [ ] test-env\route.ts
- [ ] test-vercel-build\route.ts
- [ ] trpc\[trpc]\route.ts
- [ ] webhooks\resend\route.ts
- [ ] webhooks\whatsapp\route.ts
- [ ] whatsapp\connect\route.ts
- [ ] whatsapp\qr\route.ts
- [ ] whatsapp\qrcode\route.ts
- [ ] whatsapp\route.ts
- [ ] whatsapp\twilio\webhook\route.ts
- [ ] whatsapp\webhook\route.ts
- [ ] whatsapp-cloud\send\route.ts
- [ ] whatsapp-cloud\webhook\route.ts
